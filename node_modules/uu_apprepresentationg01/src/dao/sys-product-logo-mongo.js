"use strict";

const { UuObjectDao } = require("uu_appg01_objectstore");

class SysProductLogoMongo extends UuObjectDao {
  async createSchema() {
    await super.createIndex(
      {
        awid: 1,
        language: 1,
        type: 1,
      },
      { unique: true }
    );
  }

  create(uuObject) {
    return super.insertOne(uuObject);
  }

  getByTypeAndLanguage(awid, type, language) {
    let query = {
      awid,
      type,
      language,
    };
    return super.findOne(query);
  }

  getByType(awid, type) {
    let query = {
      awid,
      type,
    };
    return super.findOne(query);
  }

  updateByTypeAndLanguage(uuObject) {
    let query = {
      awid: uuObject.awid,
      type: uuObject.type,
      language: uuObject.language,
    };

    return super.findOneAndUpdate(query, uuObject, "NONE");
  }
}

module.exports = SysProductLogoMongo;
