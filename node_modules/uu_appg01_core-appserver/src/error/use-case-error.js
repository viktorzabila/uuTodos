"use strict";

const { BaseError } = require("uu_appg01_core-utils");

class UseCaseError extends BaseError {
  static get ERROR_PREFIX() {
    return "uu-appg01/";
  }

  constructor(msg, cause = null) {
    if (msg instanceof Error) {
      cause = msg;
      msg = null;
    }
    if (msg && typeof msg === "object") {
      super(msg.message, msg.cause || cause);
      this.type = msg.type;
      this.status = msg.status;
      this.code = msg.code;
      this.dtoOut = msg.dtoOut;
      // TODO Check Ruby implementation to correctly handle paramMap and headers
      this.paramMap = msg.paramMap;
      this.headers = msg.headers;
    } else {
      super(msg, cause);
    }
    this.type = this.type || "error";
    this.status = this.status || 500;
    this.code = this.code || `${UseCaseError.ERROR_PREFIX}server/internalServerError`;
    this.headers = this.headers || {};
  }
}

module.exports = UseCaseError;
